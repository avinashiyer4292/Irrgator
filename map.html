<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Basic Page Needs
    ================================================== -->
    <meta charset="utf-8">
    <!--[if IE]><meta http-equiv="x-ua-compatible" content="IE=9" /><![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Smart Farms</title>
    <meta name="description" content="Ethanol is an Agency and Personal Portfolio Template built with bootstrap 3.3.2. This is created for a cause to support my uncle's campaign. Go and Donate at - https://life.indiegogo.com/fundraisers/medical-support-for-a-filipino-overseas-worker--3/x/10058181">
    <meta name="keywords" content="portfolio, agency, bootstrap theme, mobile responsive, template, personal">
    <meta name="author" content="ThemeForces.Com">
    
    <!-- Favicons
    ================================================== -->
    <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="img/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="img/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="img/apple-touch-icon-114x114.png">

    <!-- Bootstrap -->
    <link rel="stylesheet" type="text/css"  href="css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="fonts/font-awesome/css/font-awesome.css">

    <!-- Nivo Lightbox
    ================================================== -->
    <link rel="stylesheet" href="css/nivo-lightbox.css" >
    <link rel="stylesheet" href="css/nivo_lightbox_themes/default/default.css">

    <!-- Slider
    ================================================== -->
    <link href="css/owl.carousel.css" rel="stylesheet" media="screen">
    <link href="css/owl.theme.css" rel="stylesheet" media="screen">

    <!-- Stylesheet
    ================================================== -->
    <link rel="stylesheet" type="text/css"  href="css/style.css">
    <link rel="stylesheet" type="text/css" href="css/responsive.css">

    <!-- Google Fonts
    ================================================== -->
    <link href='http://fonts.googleapis.com/css?family=Lato:100,300,400,700,900,100italic,300italic,400italic,700italic,900italic' rel='stylesheet' type='text/css'>

     <script type="text/javascript" src="js/jquery-1.11.2.min.js"></script>
    <script type="text/javascript" src="js/modernizr.custom.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>

    <!-- Main Navigation 
    ================================================== -->
    <nav id="tf-menu" class="navbar navbar-default navbar-fixed-top">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="#"><img src="img/logo.png" alt="..."></a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
              <ul class="nav navbar-nav navbar-right">
                <li><a href="#tf-home" class="scroll">Home</a></li>
                <li><a href="#tf-services" class="scroll">Map</a></li>
                <li><a href="#tf-about" class="scroll">Profile</a></li>
                <!-- <li><a href="#tf-works" class="scroll">Works</a></li>
                <li><a href="#tf-process" class="scroll">Process</a></li>
                <li><a href="#tf-pricing" class="scroll">Pricing</a></li>
                <li><a href="#tf-blog" class="scroll">Blog</a></li>
                <li><a href="#tf-contact" class="scroll">Contact</a></li> -->
              </ul>
            </div><!-- /.navbar-collapse -->
        </div><!-- /.container-fluid -->
    </nav>

    <div id="map" style="height:700px !important; width:70% !important; display:block; float:left; margin-top:70px !important;"></div>
    <div id="location-info" style="height: 700px !important; width:30% !important;display:block; float:left; margin-top:70px !important;"></div>"
    <script>
      var map;
      
      function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
          center: {lat:  36.652357, lng: -120.458334},   
          zoom: 13,
          mapTypeId: 'terrain'
        });
        // Create an array of alphabetical characters used to label the markers.
        var labels = 'ABCDEFG';//HIJKLMNOPQRSTUVWXYZ'

      
        var iconBase = 'img/';
        var icons = {
          red: {
            icon: iconBase + 'm3.png'
          },
          yellow: {
            icon: iconBase + 'm2.png'
          },
          blue: {
            icon: iconBase + 'm1.png'
          }
        };

        var crop_icons ={

        };

        var crops=['Barley',
                 'Corn',
                 'Alfalfa',
                 'Millet',
                 'Beans',
                 'Mustard',
                 'Lentils',
                 'Millet',
                 'Canola',
                 'Sunflower',
                 'Soy'];



        //fetching random value from crops
        


        var contentString = getChartContent();
        var infowindow = new google.maps.InfoWindow({
            content: contentString
          });
         
        function getMarkerInfo(randomNumber){
            var crop1 = crops[randomNumber%crops.length];
            var crop2 = crops[(randomNumber+1)%crops.length];
            var crop3 = crops[(randomNumber+2)%crops.length];
            var crop1img = iconBase+crop1+".png";
             var crop2img = iconBase+crop2+".png";
            var crop3img = iconBase+crop3+".png";
            // alert(""+crop1+" - "+crop1img);
            // alert(""+crop2+" - "+crop2img);
            // alert(""+crop3+" - "+crop3img);
            console.log(crop1+" - "+crop1img);
           
            var parent = '<div class="cropsParent">'+
                        '<ul class="crops">'+
                            

                                '<li>'+
                                    '<img src="'+crop1img+'" height="50px" width="50px"/>'+
                                    '<h5>'+crop1+'</h5>'+
                                '</li>'+
                                '<li>'+
                                    
                                    '<h5>'+crop2+'</h5>'+
                                '</li>'+
                                '<li>'+
                                    
                                    '<h5>'+crop3+'</h5>'+
                                '</li>'+
                            '</ul>'+
                        
                        '</div>'+

                        '<div class="chartParent">'+
                        '<canvas id="myChart" width="70" height="50"></canvas>'+
                        '</div>';
                    document.getElementById('location-info').innerHTML = parent;

             var ctx = document.getElementById("myChart");
            var myChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: [crop1, crop2, crop3],
                    datasets: [{
                        label: 'Crop Growth',
                        data: [12, 19, 15],
                        backgroundColor: [
                            'rgb(236,203,6)',
                            'rgb(236,203,6)',
                            'rgb(236,203,6)'
                        ],

                        borderColor: [
                            'rgb(253,217,2)',
                            'rgb(253,217,2)',
                            'rgb(253,217,2)'
                           
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    legend: {labels:{fontColor:"white", fontSize: 12}},
                    scales: {
                        yAxes: [{
                            ticks: {
                                fontColor: "white",
                                beginAtZero:true
                            }
                        }],
                         xAxes: [{
                            ticks: {
                                fontColor: "white",
                                beginAtZero:true
                            }
                        }]

                    }
                    
                }
            });           
            
        }
        
        function getChartContent(){
            var content = '<div class="location-content">'+
                        '<h3>'+
                        '</h3>'+
                        '</div>';
                return content;
        }

       
        function addMarker(lat,lng,crop) {
          var marker = new google.maps.Marker({
            position: new google.maps.LatLng(lat, lng),
            icon: iconBase+crop+"-icon.png",
            map: map
            
          });
         
          return marker;
        }

        var cropInfo = {
            crop1: {
                maturity: '90-110 days',
                water_requirement: '390-430mm',
                root_depth : '3.3 feet',
                max_water_use: '21-28 days of its life; requires 10% more than normal',
                moisture_from: 'top 1.6 feet of root'
            },
            crop2 :{
                maturity: '100-365 days',
                water_requirement: '914mm',
                root_depth : '8-30 feet',
                max_water_use: '34-35 days of its life; requires 10% more than normal',
                moisture_from: 'depp within soil'
            },
            crop3: {
                maturity: '105-140 days',
                water_requirement: '450-650mm',
                root_depth : '2 metres or more',
                max_water_use: '40-45 days of its life; requires 10% more than normal',
                moisture_from: 'top soil layer'
            },
            crop4 : {
                maturity: '125-135 days',
                water_requirement: '600-1000mm',
                root_depth : '5 feet',
                max_water_use: '15-20 days of its life; requires 10% more than normal',
                moisture_from: 'top soil layer'
            },
            crop5 : {
                maturity: '60-100 days',
                water_requirement: '550-635mm',
                root_depth : '5 feet',
                max_water_use: '30-40 days of its life; requires 10% more than normal',
                moisture_from: 'top soil layer'
            },
            crop6 : {
                maturity: '90-110 days',
                water_requirement: '390-430mm',
                root_depth : '3.3 feet',
                max_water_use: '21-28 days of its life; requires 10% more than normal',
                moisture_from: 'top 1.6 feet of root'
            },
            crop7 : {
               maturity: '105-140 days',
                water_requirement: '450-650mm',
                root_depth : '2 metres or more',
                max_water_use: '40-45 days of its life; requires 10% more than normal',
                moisture_from: 'top soil layer'
            }
        };
       var marker1 =  addMarker(36.644461, -120.395106, crops[0]);
        var marker2 =addMarker(36.673841, -120.452966, crops[2]);
        var marker3 =addMarker(36.673746, -120.409243, crops[3]);
       var marker4= addMarker(36.659248, -120.464895, crops[6]);
       var marker5 = addMarker(36.659057, -120.439008, crops[1]);
       var marker6 = addMarker(36.643121, -120.439067, crops[7]);
       var marker7 = addMarker(36.638670, -120.510407, crops[6]);

        marker1.addListener('click',function(){
            getCropInfo(this,'barley',cropInfo.crop1);

        });

        marker2.addListener('click',function(){
            //alert("hi 2");
            getCropInfo(this,'alfalfa',cropInfo.crop2);
        });

        marker3.addListener('click',function(){
            getCropInfo(this,'millet',cropInfo.crop3);
        });

        marker4.addListener('click',function(){
            getCropInfo(this,'lentils',cropInfo.crop4);
        });

        marker5.addListener('click',function(){
            getCropInfo(this,'corn',cropInfo.crop5);
        });

        marker6.addListener('click',function(){
            getCropInfo(this,'millet',cropInfo.crop6);
        });
        
        marker7.addListener('click',function(){
            getCropInfo(this,'lentils',cropInfo.crop7);
        });


        

        function getCropInfo(marker, name, cropInf){
            
            //alert(marker.position+" - "+name);
            var cropImg = iconBase+name+".png";
            var parent = '<div class="cropsParent">'+
                        '<ul class="crops">'+
                            

                                '<li>'+
                                    '<img src="'+cropImg+'" height="70px" width="70px"/>'+
                                    '<h5>'+name+'</h5>'+
                                '</li>'+
                                
                            '</ul>'+
                        
                        '<p>Time to reach maturity: '+cropInf.maturity+' </p>'+
                        '<p>Water requirement: '+cropInf.water_requirement+' </p>'+
                        '<p>Root depth: '+cropInf.root_depth+' </p>'+
                        '<p>Maximum water use in between: '+cropInf.max_water_use+' </p>'+
                        '<p>Uses moisture from: '+cropInf.moisture_from+' </p>'+
                        '</div>'+

                        '<div class="chartParent">'+
                        '<canvas id="myChart" width="70" height="50"></canvas>'+
                        '</div>';
            document.getElementById('location-info').innerHTML = parent;



        }

       var circle1 = new google.maps.Circle({
          map: map,
          radius: 1000,    // 10 miles in metres
          fillColor: '#AA0000'
        });
        circle1.bindTo('center', marker1, 'position');

        var circle2 = new google.maps.Circle({
          map: map,
          radius: 1000,    // 10 miles in metres
          fillColor: '#AA0000'
        });
        circle2.bindTo('center', marker2, 'position');

        var circle3 = new google.maps.Circle({
          map: map,
          radius: 1000,    // 10 miles in metres
          fillColor: '#AA0000'
        });
        circle3.bindTo('center', marker3, 'position');


        circle1.addListener('click',function(){
            getCircleInfo(dangerInfo.danger1);
        });

        circle2.addListener('click',function(){
            getCircleInfo(dangerInfo.danger2);
        });

        circle3.addListener('click',function(){
            getCircleInfo(dangerInfo.danger3);
        });


        var dangerInfo = {
            danger1: {
                water_required: '6.6 mm per day',
                soil_type: 'Moderately drained',
                water_levels: [46.2, 47, 42],
                reason: 'Reduced water requirement due to Late season stage'
            },
            danger2: {
                water_required: '4.5 mm per day',
                soil_type: 'Soil with high Calcium, Magnesium, Sulphur, Potassium and Phosphorus',
                water_levels: [38.7 ,40, 41],
                reason: 'Increased water requirement due to mid-season stage'
            },
            danger3: {
                water_required: '8.8 mm per day',
                soil_type: 'Moderately drained',
                water_levels: [56,59,60],
                reason: 'Reduced water requirement due to Late season stage'
            }
        };

        function getCircleInfo(danger){
            var component = '<div class="circleParent">'+
                        
                        '<p>Amount of water required per sq/acre: '+danger.water_required+' </p>'+
                        '<p>Soil type: '+danger.soil_type+' </p>'+
                        '<div class="chartParent">'+
                        '<canvas id="myChart" width="70" height="50"></canvas>'+
                        '</div>'+
                        '<p class="danger-reason">Attention required: '+danger.reason+'! </p>'+
                        '</div>';
            document.getElementById('location-info').innerHTML = component;

            var ctx = document.getElementById("myChart");
            var myChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ["First week", "Second week", "Third week"],
                    datasets: [{
                        label: 'Water levels',
                        data: danger.water_levels,
                        backgroundColor: [
                            'rgb(236,203,6)',
                            'rgb(236,203,6)',
                            'rgb(236,203,6)'
                        ],

                        borderColor: [
                            'rgb(253,217,2)',
                            'rgb(253,217,2)',
                            'rgb(253,217,2)'
                           
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    legend: {labels:{fontColor:"white", fontSize: 12}},
                    scales: {
                        yAxes: [{
                            ticks: {
                                fontColor: "white",
                                beginAtZero:true
                            }
                        }],
                         xAxes: [{
                            ticks: {
                                fontColor: "white",
                                beginAtZero:true
                            }
                        }]

                    }
                    
                }
            });
        }
      
      }
      
    </script>
     <script src="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/markerclusterer.js">
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAyfagI53ZT1fEDoQac4pQ2eANRbW-eWMI&callback=initMap"
    async defer></script>
</body>
</html>